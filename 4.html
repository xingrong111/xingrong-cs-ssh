<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>èå§è–›è€å¸ˆå¹¸ç¦æ—…é€”</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      min-height: 100vh;
      background: url("images/bei2.jpg") no-repeat center;
      font-family: 'Permanent Marker', cursive;
      background-size: cover;
      overflow: hidden;
      position: relative; /* ä¸ºç»å¯¹å®šä½æä¾›å‚è€ƒ*/
    }
    /* æ–‡å­—å®¹å™¨ï¼šè®¾ç½®åç§» */
    .text-wrap {
        position: relative;
        z-index: 10;
        /* è®©å†…éƒ¨æ–‡å­—æ°´å¹³å±…ä¸­*/
        text-align: center; 
        padding-top: 15vh;
        max-width: 90%;
        margin: 0 auto;
    }
    .centered-text {
        font-size: clamp(2rem, 8vw, 5rem);
        color: #fff;
        text-shadow: 0 0 10px #ff7eb9, 0 0 20px #ff7eb9;
        animation: breathe 4s ease-in-out infinite;
        margin-bottom: 5vh;
        position: relative;
        display: inline-block;
    }
    /* æŒ‰é’®ç»„å®¹å™¨ï¼šç›¸å¯¹äºæ–‡å­—å®¹å™¨å®šä½ */
    .button-group {
      display: flex;
      flex-direction: column; 
      align-items: center; /* æŒ‰é’®æ°´å¹³å±…ä¸­ */
      gap: 30px; /* æŒ‰é’®ä¹‹é—´çš„å‚ç›´é—´éš” */
      z-index: 10;
      margin-top: 2vh;
    }
    button {
      width: clamp(180px, 20vw, 240px);
      height: clamp(50px, 6vw, 74px);
      padding: 10px 20px;
      font-size: clamp(1.2rem, 3vw, 1.8rem);
      color: plum;
      font-family: 'Permanent Marker', cursive;
      animation: breathe 2s ease-in-out infinite;
      border-radius: 25px; 
      background-color: #ff7eb9;
      color: pink;
      border: 2px solid #ff7eb9;
      box-shadow: 0 0 10px rgb(26, 13, 15);
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
    }
    button:hover{
        transform: scale(1.1);
        box-shadow: 0 0 20px pink;
    }
    .image-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 5;
    }
    .floating-image {
        position: absolute;
        width: clamp(100px, 12vw, 180px);
        height: clamp(100px, 12vw, 180px);
        object-fit: cover;
        border-radius: 10px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        animation: fadeIn 0.5s ease-out forwards, float 6s ease-in-out infinite;
        pointer-events: auto;
        transition: all 0.3s ease;
        opacity: 0;
    }
    .floating-image:hover {
        transform: scale(1.1);
        box-shadow: 0 15px 30px rgba(0,0,0,0.3);
    }
    .ping-image {
        border: 3px solid #ff7eb9;
    }
    .xue-image {
        border: 3px solid #9e7eb9;
    }

    span{
        /*ä½¿spanå…ƒç´ ç›¸å¯¹äºæœ€è¿‘çš„å·²å®šä½ç¥–å…ˆå…ƒç´ ï¼ˆ.containerï¼‰è¿›è¡Œç»å¯¹å®šä½*/
        position:absolute;
        /*å°†spanå…ƒç´ çš„å·¦ä¸Šè§’å®šä½åˆ°.containerå…ƒç´ çš„æ­£ä¸­é—´*/
        top:50%;
        left:50%;
        /*è®¾ç½®spanå…ƒç´ çš„å®½åº¦å’Œé«˜åº¦ä¸º4åƒç´ */
        width: 4px;
        height: 4px;
        /*èƒŒæ™¯é¢œè‰²*/
        background-color: #fff;
        /*spanè¾¹æ¡†åŠå¾„è®¾ç½®ä¸º50%ï¼Œä½¿å…¶å‘ˆç°åœ†å½¢*/
        border-radius: 50%;
        /*æ·»åŠ å‘å…‰æ•ˆæœ*/
        box-shadow: 0 0 0 4px rgba(255,255,255,0.1),
        0 0 0 8px rgba(255,255,255,0.1),
        0 0 20px rgba(255,255,255,1);
        /*è®¾ç½®åŠ¨ç”»ï¼ŒåŠ¨ç”»åç§°ä¸ºanimate,æ—¶é•¿ä¸º3ç§’ï¼Œçº¿æ€§ï¼Œæ— é™æ¬¡å¾ªç¯æ’­æ”¾*/
        animation: animate 3s linear infinite;
    }

    /*æ‹–å°¾æ•ˆæœ*/
    span::before{
        /*ä¼ªå…ƒç´ å†…å®¹ä¸ºç©º*/
        content: "";
        /*ä½¿ä¼ªå…ƒç´ ç›¸å¯¹äºspanå…ƒç´ è¿›è¡Œç»å¯¹å®šä½*/
        position:absolute;
        /*å°†ä¼ªå…ƒç´ åœ¨å‚ç›´æ–¹å‘ä¸Šå±…ä¸­æ˜¾ç¤º*/
        top: 50%;
        transform:translateY(-50%);
        /*è®¾ç½®ä¼ªå…ƒç´ çš„å®½åº¦å’Œé«˜åº¦*/
        width: 300px;
        height: 3px;
        /*è®¾ç½®ä¼ªå…ƒç´ çš„èƒŒæ™¯ä¸ºæ°´å¹³æ–¹å‘çš„çº¿æ€§æ¸å˜ï¼Œä»ç™½è‰²æ¸å˜åˆ°é€æ˜ã€‚*/
        background: linear-gradient(90deg, pink, transparent);
    }

    /*æ¥ä¸‹æ¥åˆ†åˆ«ä¸ºæ¯ä¸ªæµæ˜Ÿè®¾ç½®ä½ç½®ã€åŠ¨ç”»å»¶è¿Ÿæ—¶é—´ã€åŠ¨ç”»æ—¶é•¿*/
    span:nth-child(1){
        top:0;
        right: 0;
        /*initialå…³é”®å­—ç”¨äºè®¾ç½®CSSå±æ€§ä¸ºå®ƒçš„åˆå§‹å€¼*/
        left: initial;
        /*åŠ¨ç”»å»¶è¿Ÿæ—¶é—´*/
        animation-delay: 0s;
        /*åŠ¨ç”»æ—¶é•¿*/
        animation-duration: 1s;
    }

    span:nth-child(2){
        top:0;
        right: 80px;
        left: initial;
        animation-delay: 0.2s;
        animation-duration: 3s;
    }

    span:nth-child(3){
        top:80px;
        right: 0;
        left: initial;
        animation-delay: 0.4s;
        animation-duration: 2s;
    }

    span:nth-child(4){
        top:0;
        right: 180px;
        left: initial;
        animation-delay: 0.6s;
        animation-duration: 1.5s;
    }

    span:nth-child(5){
        top:0;
        right: 400px;
        left: initial;
        animation-delay: 0.8s;
        animation-duration: 2.5s;
    }

    span:nth-child(6){
        top:0;
        right: 600px;
        left: initial;
        animation-delay: 1s;
        animation-duration: 3s;
    }

    span:nth-child(7){
        top:300px;
        right: 0;
        left: initial;
        animation-delay: 1.2s;
        animation-duration: 1.75s;
    }

    span:nth-child(8){
        top:0;
        right: 700px;
        left: initial;
        right: 0;
        left: 700px;
        animation-delay: 1.4s;
        animation-duration: 1.25s;
    }

    span:nth-child(9){
        top:0;
        right: 1000px;
        left: initial;
        animation-delay: 0.75s;
        animation-duration: 2.25s;
    }

    span:nth-child(10){
        top:0;
        right: 450px;
        left: initial;
        animation-delay: 2.75s;
        animation-duration: 2.25s;
    }
    span:nth-child(11){
        top:600px;
        right: 0;
        left: 400px;
        animation-delay: 2s;
        animation-duration: 1.75s;
    }
    span:nth-child(12){
        top:600px;
        right: 0;
        left: 700px;
        animation-delay: 1.25s;
        animation-duration: 2s;
    }
    span:nth-child(13){
        top:600px;
        right: 0;
        left: 1000px;
        animation-delay: 2.75s;
        animation-duration: 2.25s;
    }
    span:nth-child(14){
        top:600px;
        right: 0;
        left: 600px;
        animation-delay: 0.75s;
        animation-duration: 2s;
    }

    /*å®šä¹‰åŠ¨ç”»*/
    /*èƒŒæ™¯ç¼©æ”¾åŠ¨ç”»*/
    @keyframes animateBg{  /*å®šä¹‰åä¸ºanimateBgçš„åŠ¨ç”»*/
        0%, 100%{ /*åœ¨ç”»é¢å¼€å§‹0%å’Œç»“æŸ100%æ—¶ï¼ŒèƒŒæ™¯å›¾åƒçš„ç¼©æ”¾æ¯”ä¾‹ä¸º1*/
            transform: scale(1);
        }
        50%{  /*åœ¨ç”»é¢è¿›è¡Œåˆ°50%æ—¶ï¼ŒèƒŒæ™¯å›¾åƒçš„ç¼©æ”¾æ¯”ä¾‹ä¸º1.2*/
            transform: scale(1.2);
        }
    }

    /*æµæ˜Ÿåˆ’è¿‡åŠ¨ç”»*/
    @keyframes animate{
        0%{  /*åœ¨åŠ¨ç”»å¼€å§‹æ—¶ï¼ˆ0%ï¼‰ï¼Œspanå…ƒç´ æ—‹è½¬315Â°ï¼Œæ°´å¹³ä½ç§»ä¸º0ï¼Œé€æ˜åº¦ä¸º1*/
            transform: rotate(315deg) translateX(0);
            opacity: 1;
        }
        90%{/*åœ¨åŠ¨ç”»è¿›è¡Œåˆ°90%æ—¶ï¼Œspanå…ƒç´ çš„é€æ˜åº¦ä¸º1*/
            opacity: 1;
        }
        100%{/*åœ¨åŠ¨ç”»ç»“æŸæ—¶ï¼ˆ100%ï¼‰spanå…ƒç´ æ—‹è½¬315Â°ï¼Œæ°´å¹³å‘å·¦ä½ç§»ä¸º1000pxï¼Œé€æ˜åº¦ä¸º0ï¼Œå®ç°æµè¡Œåˆ’è¿‡çš„æ•ˆæœ*/
            transform: rotate(315deg) translateX(-1000px);
            opacity: 0;
        }
    }

    @keyframes breathe {
      0%, 100% { 
        transform: scale(1); 
        opacity: 1; 
      }
      50% { 
        transform: scale(1.05); 
        opacity: 0.9; 
      }
    }
    @keyframes fadeIn {
        from{
            opacity: 0;
            transform: scale(0.8);
        }        
        to{
            opacity: 1;
            transform: scale(1);
        }
    }
    @keyframes float{
        0%, 100%{
            transform: translateY(0) rotate(0deg);
        }
        25%{
            transform: translateY(-10px) rotate(2deg);
        }
        75%{
            transform: translateY(10px) rotate(-2deg);
        }        
    }
    @keyframes pulse {
        0%, 100% { box-shadow: 0 0 10px pink; }
        50% { box-shadow: 0 0 20px pink, 0 0 30px rgba(255, 126, 185, 0.6); }
    }

    /* åº†ç¥æ•ˆæœ */
    .celebration {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 20;
        display: none;
    }
    .particle {
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 50%;
    }

    /* è®¡æ•°å™¨æ ·å¼ */
    .counter {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0,0,0,0.5);
        color: white;
        padding: 10px 15px;
        border-radius: 10px;
        font-size: 1.2rem;
        z-index: 15;
    }
    /*è‡ªå®šä¹‰ç²‰è‰²å¼¹çª—*/
    #customAlert {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 192, 203, 0.5); /* ç²‰è‰²é€æ˜èƒŒæ™¯ */
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 999;
    }

    .custom-alert-box {
        background-color: pink;
        color: #fff;
        padding: 30px 40px;
        border-radius: 20px;
        font-size: 1.5rem;
        text-align: center;
        box-shadow: 0 0 20px #ff7eb9;
        animation: breathe 1s ease-in-out infinite;
    }

    .custom-alert-box button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 1rem;
        border: none;
        background-color: #ff7eb9;
        color: white;
        border-radius: 10px;
        cursor: pointer;
    }

  </style>
  <!-- å¼•å…¥å­—ä½“ï¼ˆå¦‚æœéœ€è¦ï¼‰ -->
  <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
  <audio id="bgm" src="mp3/music.mp3" autoplay loop></audio>
</head>
<body>
  <!-- æ–‡å­—å®¹å™¨ï¼šæ§åˆ¶æ–‡å­—åç§» -->
  <div class="text-wrap">
    <div class="centered-text">
      <p>èå§è–›è€å¸ˆå¹¸ç¦</p>
    </div>
    <!-- æŒ‰é’®ç»„ï¼šæ”¾åœ¨æ–‡å­—å®¹å™¨å†…ï¼Œæ–¹ä¾¿ç›¸å¯¹å®šä½ -->
    <div class="button-group">
      <button onclick="addPingImage()">èå§æœ€å¹¸ç¦</button>
      <button onclick="addXueImage()">è–›è€å¸ˆæ›´å¹¸ç¦</button>
    </div>
  </div>

  <div class="image-container" id="imageContainer"></div>
  <div class="celebration" id="celebration"></div>

  <!-- åŸæœ‰çš„ .container ä¿æŒä¸å˜ï¼ˆå¦‚æœéœ€è¦æµæ˜Ÿç­‰æ•ˆæœï¼‰ -->
  <div class="container">
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
  </div>

  <script>
    const pingImages = [
      "images/xue1.jpg",
      "images/xue2.jpg",
      "images/xue3.jpg",
      "images/xue4.jpg",
      "images/xue5.jpg",
      "images/xue6.jpg",
      "images/xue7.jpg",
      "images/xue8.jpg",
      "images/xue9.jpg",
      "images/xue10.jpg",
      "images/xue11.jpg",
      "images/xue12.jpg",
      "images/xue13.jpg",
      "images/xue14.jpg"

    ];
    const xueImages = [
      "images/ping1.jpg",
      "images/ping2.jpg",
      "images/ping3.jpg",
      "images/ping4.jpg",
      "images/ping5.jpg",
      "images/ping6.jpg",
      "images/ping7.jpg",
      "images/ping8.jpg",
      "images/ping9.jpg",
      "images/ping10.jpg",
      "images/ping11.jpg",
      "images/ping12.jpg",
      "images/ping13.jpg",
      "images/ping14.jpg",
    ];
    let pingCount = 0;
    let xueCount = 0;
  
    const usedPingImages = new Set();
    const usedXueImages = new Set();
    const placedPositions = [];
  
    function getTextArea() {
      const textElement = document.querySelector('.text-wrap');
      const rect = textElement.getBoundingClientRect();
      return {
        left: rect.left,
        top: rect.top,
        width: rect.width,
        height: rect.height,
        right: rect.right,
        bottom: rect.bottom,
      };
    }
  
    function isOverlapping(x, y, size) {
      const padding = 10;
      for (const pos of placedPositions) {
        const dx = Math.abs(pos.x - x);
        const dy = Math.abs(pos.y - y);
        if (dx < size + padding && dy < size + padding) return true;
      }
      const text = getTextArea();
      const inTextArea =
        x + size > text.left &&
        x < text.right &&
        y + size > text.top &&
        y < text.bottom;
      return inTextArea;
    }
  
    function addImage(imagesArray, isPing) {
        const container = document.getElementById('imageContainer');
        const img = document.createElement('img');
        img.className = `floating-image ${isPing ? 'ping-image' : 'xue-image'}`;

        let randomIndex;
        const usedSet = isPing ? usedPingImages : usedXueImages;
        if (usedSet.size >= imagesArray.length) usedSet.clear();
        do {
            randomIndex = Math.floor(Math.random() * imagesArray.length);
        } while (usedSet.has(randomIndex));
        usedSet.add(randomIndex);
        img.src = imagesArray[randomIndex];

        const imgSize = 150;
        const screenWidth = window.innerWidth;
        const screenHeight = window.innerHeight;
        const padding = 20;

        let x, y, attempts = 0;
        let overlap = true;

        const text = getTextArea();

    while (overlap && attempts < 200) {
        attempts++;
        x = Math.floor(Math.random() * (screenWidth - imgSize));
        y = Math.floor(Math.random() * (screenHeight - imgSize));

        // æ£€æŸ¥æ˜¯å¦åœ¨ä¸­å¤®æ–‡å­—åŒºåŸŸ
        const inTextArea = (
        x + imgSize > text.left - padding &&
        x < text.right + padding &&
        y + imgSize > text.top - padding &&
        y < text.bottom + padding
        );

        if (inTextArea) continue;

        // æ£€æŸ¥ä¸å·²æœ‰å›¾ç‰‡æ˜¯å¦é‡å 
        const noOverlap = placedPositions.every(pos => {
        const dx = Math.abs(pos.x - x);
        const dy = Math.abs(pos.y - y);
        return dx > imgSize && dy > imgSize;
        });

            if (noOverlap) overlap = false;
        }

        img.style.left = `${x}px`;
        img.style.top = `${y}px`;

        img.onclick = function () {
            img.style.animation = 'fadeOut 0.5s ease-out forwards';
            setTimeout(() => container.removeChild(img), 500);
        };

        container.appendChild(img);
        placedPositions.push({ x, y });

        if (isPing) pingCount++;
        else xueCount++;
        }

        function addPingImage() {
            if (pingCount < 15) addImage(pingImages, true);
            if (pingCount >= 14 && xueCount >= 14 && !alerted) {
                showCustomAlert();
                alerted = true;
            }

        }
    
        function addXueImage() {
            if (xueCount < 15) addImage(xueImages, false);
            if (pingCount >= 14 && xueCount >= 14 && !alerted) {
                showCustomAlert();
                alerted = true;
            }

        }
        let alerted = false;

        function showCustomAlert() {
            document.getElementById("customAlert").style.display = "flex";
        }   

        function closeCustomAlert() {
            document.getElementById("customAlert").style.display = "none";
            window.location.href = "5.html";
        }
        document.addEventListener('DOMContentLoaded', function () {
            // å½“ç”¨æˆ·ç‚¹å‡»é¡µé¢ä»»æ„åœ°æ–¹ï¼Œå¼€å§‹æ’­æ”¾èƒŒæ™¯éŸ³ä¹
            document.body.addEventListener('click', function () {
            const bgm = document.getElementById('bgm');
            if (bgm) {
                bgm.play().catch((e) => {
                console.log("æ’­æ”¾å¤±è´¥ï¼š", e);
                });
            }
            }, { once: true }); // ç¡®ä¿åªæ‰§è¡Œä¸€æ¬¡
        });

    </script> 
    <div id="customAlert" style="display: none;">
        <div class="custom-alert-box">
          å¹¸ç¦å¼€å¯å€é€Ÿï¼Œç”œèœœæŒ‡æ•°çˆ†è¡¨ï¼å³å°†è¿›å…¥å¹¸ç¦ä¸‹ä¸€ç«™ï¼
          <br>
          <button onclick="closeCustomAlert()">å¹¸ç¦å‰è¿›ï¼ğŸ‹ğŸŒ¼ğŸŒ </button>
        </div>
      </div>
      
    
    </body>
    </html>